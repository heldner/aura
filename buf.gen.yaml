version: v2
plugins:
  # Pydantic models from Proto (Source of Truth)
  - remote: buf.build/community/danielgtaylor-betterproto:v1.2.5
    out: packages/aura-core/src/aura_core/gen
    opt:
      - pydantic_version=2

  # Core service proto
  - remote: buf.build/protocolbuffers/pyi
    out: core/src/hive/proto
  - remote: buf.build/grpc/python:v1.76.0
    out: core/src/hive/proto
  - remote: buf.build/protocolbuffers/python
    out: core/src/hive/proto

  # Gateway proto
  - remote: buf.build/protocolbuffers/pyi
    out: api-gateway/src/proto
  - remote: buf.build/grpc/python:v1.76.0
    out: api-gateway/src/proto
  - remote: buf.build/protocolbuffers/python
    out: api-gateway/src/proto

  # Agents/Adaptors proto
  - remote: buf.build/protocolbuffers/pyi
    out: adapters/telegram-bot/src/proto
  - remote: buf.build/grpc/python:v1.76.0
    out: adapters/telegram-bot/src/proto
  - remote: buf.build/protocolbuffers/python
    out: adapters/telegram-bot/src/proto

  # Frontend ts proto
  - remote: buf.build/bufbuild/es
    out: frontend/src/lib
    opt:
      - target=ts
