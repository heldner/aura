global:
  environment: local

# Fast tunnel
tunnel:
  image:
    repository: snowdreamtech/frpc
    tag: alpine3.22
    pullPolicy: IfNotPresent
  grafana:
    localIP: "monitoring-grafana.monitoring.svc.cluster.local"
    localPort: 80
    remotePort: 8083

# API Gateway Service Configuration
gateway:
  livenessProbe:
    path: /healthz
    initialDelaySeconds: 5
    periodSeconds: 10
    timeoutSeconds: 2
    failureThreshold: 3
  readinessProbe:
    path: /readyz
    initialDelaySeconds: 5
    periodSeconds: 10
    timeoutSeconds: 2
    failureThreshold: 3
  image:
    repository: ghcr.io/zaebee/aura-gateway # Docker image repository for the API Gateway
    tag: latest
    pullPolicy: Always # Image pull policy
  service:
    type: LoadBalancer # Service type to expose the API Gateway
    port: 8000
  replicaCount: 1
  resources:
    limits:
      cpu: 200m
      memory: 512Mi
  # CORS allowed origins (comma-separated list)
  corsOrigins: "https://aura.zae.life"
  env:
    LOG_LEVEL: info

# Core Service Configuration
core:
  livenessProbe:
    initialDelaySeconds: 5
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3
  readinessProbe:
    initialDelaySeconds: 10
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3
  image:
    repository: ghcr.io/zaebee/aura-core
    tag: latest
    pullPolicy: IfNotPresent
  service:
    port: 50051
  replicaCount: 1
  resources:
    limits:
      cpu: 200m
      memory: 1Gi
    requests:
      cpu: 100m
      memory: 128Mi
  env:
    AURA_SERVER__LOG_LEVEL: info
    AURA_LLM__MODEL: "mistral/mistral-large-latest"  # Can override: openai/gpt-4o, ollama/mistral, rule
    AURA_CRYPTO__ENABLED: "false"

# PostgreSQL Database Configuration
postgres:
  enabled: true
  image: pgvector/pgvector:pg15
  storage: 1Gi
  auth:
    username: user
    password: password
    database: aura_db

# Redis Configuration
redis:
  enabled: true
  image: redis:7-alpine

# Frontnend Configuration
frontend:
  probe: &frontendProbe
    path: /
    initialDelaySeconds: 5
    periodSeconds: 10
    timeoutSeconds: 2
    failureThreshold: 3
  livenessProbe: *frontendProbe
  readinessProbe: *frontendProbe
  image:
    repository: ghcr.io/zaebee/aura-frontend
    tag: latest
    pullPolicy: IfNotPresent
  service:
    type: LoadBalancer
    port: 80
    targetPort: 80
  replicaCount: 1
  resources:
    limits:
      cpu: 200m
      memory: 256Mi
  apiGatewayUrl: "https://api.aura.zae.life/v1"
  env:
    LOG_LEVEL: info

# Telegram Bot Service Configuration
telegram:
  image:
    repository: ghcr.io/zaebee/aura-telegram-bot
    tag: latest
    pullPolicy: IfNotPresent
  replicaCount: 1
  resources:
    limits:
      cpu: 100m
      memory: 128Mi
    requests:
      cpu: 50m
      memory: 64Mi
  env:
    LOG_LEVEL: info

# Secrets for the application.
# For production, it is strongly recommended to use a secret management solution
# like Vault or External Secrets Operator instead of providing plain-text secrets here.
secrets:
  imagePullSecrets:
  - name: ghcr-secret

# Monitoring Stack Configuration (Cross-namespace)
monitoring:
  prometheus:
    url: "http://monitoring-kube-prometheus-prometheus.monitoring.svc.cluster.local:9090"
  jaeger:
    enabled: true
    queryUrl: "" # Defaults to http://aura-jaeger.<release-namespace>.svc.cluster.local:16686 if empty
    collectorUrl: "" # Defaults to http://aura-jaeger.<release-namespace>.svc.cluster.local:4317 if empty
    service:
      type: LoadBalancer
    resources:
      limits:
        cpu: 500m
        memory: 512Mi
  loki:
    url: "http://loki.monitoring.svc.cluster.local:3100"
